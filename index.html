<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Question Answering System</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 2rem; }
    .row { display:flex; gap:.5rem; margin-bottom:1rem; }
    input[type=text]{ flex:1; padding:.6rem .8rem; border:1px solid #ccc; border-radius:8px; }
    button{ padding:.6rem 1rem; border:0; border-radius:8px; cursor:pointer; }
    #ans{ padding:1rem; background:#f7f7f8; border:1px solid #eee; border-radius:8px; white-space:pre-wrap; }
    label { display:flex; align-items:center; gap:.4rem; }
  </style>
</head>
<body>
  <h1>Question Answering System</h1>

  <div class="row">
    <input id="q" type="text" placeholder="Ask a question… e.g., When is Sophia Al-Farsi planning to fly to Paris?" />
    <button id="go">Ask</button>
  </div>

  <div class="row">
    <label><input id="debug" type="checkbox" /> Debug mode</label>
  </div>

  <div id="ans">Answer will appear here.</div>

  <script>
    // Hard-coded API base (no user input needed)
    const API_BASE = 'https://member-qa-933867666784.us-central1.run.app';

    const q = document.getElementById('q');
    const go = document.getElementById('go');
    const ans = document.getElementById('ans');
    const debug = document.getElementById('debug');

    async function ask() {
      const base = API_BASE.replace(/\/+$/,'');
      const url = new URL(base + '/ask');
      url.searchParams.set('question', q.value || '');
      if (debug.checked) url.searchParams.set('debug', '1');
      ans.textContent = 'Thinking…';
      try {
        const r = await fetch(url);
        const j = await r.json();
        ans.textContent = JSON.stringify(j, null, 2);
      } catch (e) {
        ans.textContent = 'Error: ' + e.message;
      }
    }

    go.onclick = ask;
    q.addEventListener('keydown', (e)=>{ if (e.key === 'Enter') ask(); });
  </script>
</body>
</html>
